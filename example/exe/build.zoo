
exe {
  name 'helloworld'
  version '0.0.1'

  src 'src/*.cpp', 'build/generated/version.cpp'

}

exe {
  name 'versiongen'

  src 'versiongen/main.cpp'
}

task {
  output 'build/generated/version.cpp'
  depends 'versiongen'

  cmd { ["${exe.versiongen.output}", '-o', "${output}"] }
}

compile {
  language 'c++'
  target 'osx-x86_64'

  debug {
    flags '-O0', '-g'
  }

  release {
    flags '-O3'
  }

  cmd { ['c++', "$flags", '-o', "$output", '-c', "$input"] }
}
